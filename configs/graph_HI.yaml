graph_scale:
  individuals: 8000
  # businesses: 0
  institutions_per_country: 1
  individual_accounts_per_institution_range: [1, 3]
  business_accounts_per_institution_range: [1, 5]

# Target fraud ratio: background transactions are capped so that
# fraud_count / total_transactions ≈ target_fraud_ratio.
# E.g., 0.02 means ~2% of transactions will be fraudulent.
# Set to null or remove to disable capping (use raw per_account_per_day rate).
target_fraud_ratio: 0.0009

# Institution filter: only export transactions where at least one account
# belongs to an institution in the specified country.
# Set to null or remove to export all transactions (default behavior).
# Example: "NL" for Netherlands-based institutions only.
institution_filter_country: null

transaction_rates:
  # This rate is used as the *maximum* rate; actual count is capped by target_fraud_ratio.
  per_account_per_day: 2
time_span:
  start_date: '2025-01-01T00:00:00'
  end_date: '2025-12-31T23:59:59'
account_balance_range_normal: [1000.0, 50000.0]

company_size_range: [1, 1000]
random_seed: 42
business_creation_date_range: [90, 5475]

backgroundPatterns:
  # Amount distributions calibrated to real-world data from:
  # - 2022 Federal Reserve Payments Study (8th Triennial)
  # - FinCEN SAR Statistics (2014-2024)
  # - Nacha ACH reports, Nilson Report
  #
  # All amounts use log-normal distributions (real-world transaction amounts
  # are heavily right-skewed). Parameters: mu = ln(median), sigma controls tail.
  # Structuring interleaving retained to prevent amount-based leakage.

  # Log-normal distribution parameters per transaction type
  # These are shared defaults; individual patterns can override
  amount_distributions:
    payment:
      mu: 3.8          # median ~$45 (consumer card-like payments)
      sigma: 1.2       # heavy right tail
      min: 1.0
      max: 50000.0     # B2B payments can be large
    transfer:
      mu: 5.5          # median ~$245 (ACH-like transfers)
      sigma: 2.0       # very heavy tail ($5 to $100K+)
      min: 5.0
      max: 500000.0    # business wire transfers reach into hundreds of thousands
    deposit:
      mu: 5.3          # median ~$200 (cash deposits)
      sigma: 1.5       # tail into business deposits ($5K-$10K)
      min: 10.0
      max: 100000.0    # business deposits can be very large
    withdrawal:
      mu: 4.8          # median ~$122 (ATM withdrawals; Fed 2021 avg $198)
      sigma: 0.9       # moderate tail (ATM limits)
      min: 20.0
      max: 5000.0
    salary:
      mu: 7.4          # median ~$1,636 (direct deposit)
      sigma: 0.6       # concentrated (salaries are regular)
      min: 200.0
      max: 30000.0
    high_value:
      mu: 9.6          # median ~$15K (business/property)
      sigma: 1.5       # tail into hundreds of thousands
      min: 5000.0
      max: 1000000.0

  randomPayments:
    weight: 0.35       # Hub-and-spoke random payments
    legit_rate_multiplier: [0.3, 0.8]
    transaction_type_probabilities:
      transfer: 0.35
      payment: 0.30
      deposit: 0.20
      withdrawal: 0.15
    # Log-normal amounts (uses shared defaults above per tx type)
    use_lognormal: true
    # Light amount interleaving (structuring-like amounts)
    structured_amount_probability: 0.03
    structuring_range: [7000.0, 9900.0]
    # Light temporal interleaving
    burst_probability: 0.10
    burst_duration_minutes: 240

  salaryPayments:
    weight: 0.08
    payment_intervals: [14, 30]
    # Log-normal salary: median ~$1,636, spread by sigma
    use_lognormal: true
    salary_variation: 0.05
    preferred_payment_days: [1, 15, 30]
    # High earners use a shifted distribution
    high_earner_mu: 8.5      # median ~$4,900
    high_earner_sigma: 0.5

  fraudsterBackground:
    weight: 0.25
    # Uses same log-normal distributions as legitimate patterns (no leak)

  legitimateHighPayments:
    weight: 0.08
    # Uses high_value log-normal distribution
    use_lognormal: true
    high_payment_type_probabilities:
      property: 0.2
      business: 0.5
      luxury: 0.3
    high_payment_rate_per_month: 0.1

  # Legitimate burst activity
  legitimateBurst:
    weight: 0.08
    burst_user_fraction: 0.05
    burst_size_range: [3, 8]
    use_lognormal: true     # Uses "payment" distribution
    time_between_txs_minutes: [10, 120]
    include_cash_ops: true
    cash_ops_probability: 0.10
    bursts_per_user_range: [1, 2]
    # Light fraud-like amounts
    structuring_burst_probability: 0.05
    structuring_amount_range: [7000.0, 9900.0]

  # Cash operations with log-normal amounts
  legitimateCashOperations:
    weight: 0.15
    cash_user_fraction: 0.35
    operations_per_month_range: [2, 8]
    use_lognormal: true     # Uses deposit/withdrawal distributions
    deposit_probability: 0.35
    # Rapid deposit sequence mode (mimics small business cash handling)
    rapid_deposit_mode:
      enabled: true
      probability: 0.08
      deposits_per_sequence: [2, 4]
      interval_days: [1, 5]

  legitimatePeriodicPayments:
    weight: 0.12
    periodic_user_fraction: 0.4
    payment_intervals: [7, 14, 30]
    use_lognormal: true     # Uses "payment" distribution for recurring bills
    subscriptions_per_user_range: [1, 4]

  legitimateChains:
    weight: 0.12
    num_chains_per_generation: 50
    use_lognormal: true     # Chain amounts drawn from tx-type-appropriate distributions
    amount_decay_range: [0.95, 1.0]

  # Legitimate structuring-like deposits (still uniform in structuring range)
  legitimateStructuring:
    weight: 0.05
    user_fraction: 0.04
    deposit_amount_range: [7500.0, 9999.0]
    deposits_per_month_range: [1, 3]
    burst_probability: 0.15

  # Legitimate rapid fund flows
  legitimateRapidFlow:
    weight: 0.05
    events_per_1000_users: 15
    inflows_per_event: [2, 5]
    outflows_per_event: [1, 4]
    use_lognormal: true     # Uses "transfer" distribution
    inflow_to_outflow_delay_hours: [4, 72]
    # Light fraud-like structuring
    structuring_amount_probability: 0.05
    structuring_amount_range: [7000.0, 9900.0]

  # Legitimate high-risk entity activity
  legitimateHighRiskActivity:
    weight: 0.15
    activity_fraction: 0.85
    transactions_per_account_range: [8, 25]
    use_lognormal: true     # Uses "payment" distribution

# Pattern generation settings
# NOTE: With layering enabled (2-5 extra hops), each pattern generates ~4-5x more
# transactions. Reduce num_illicit_patterns accordingly to maintain target fraud ratio.
# Formula: max_fraud_txs ≈ background_capacity × target_ratio / (1 - target_ratio)
#          For 0.07% with ~1.3M background: max_fraud ≈ 910 transactions
#          With ~20-50 txs per pattern (layered): ~20-45 patterns max
pattern_frequency:
  random: True
  num_illicit_patterns: 180

  # If random is false these values are used instead of num_illicit patterns
  RapidFundMovement: 33
  FrontBusinessActivity: 33
  RepeatedOverseasTransfers: 33
  UTurnTransactions: 901

# Layering configuration: adds intermediate hops to fraud patterns
# This increases graph depth and requires more GNN message passing iterations
layering_config:
  enabled: true
  min_extra_hops: 2  # Minimum layering hops per major fraud step
  max_extra_hops: 5  # Maximum layering hops per major fraud step
  # Use legitimate-looking amounts (drawn from background pattern ranges)
  use_legit_amounts: true
  # Delay between layering hops (in hours)
  hop_delay_hours: [1, 48]
  # Amount decay per hop (simulates fees/splits)
  amount_decay_range: [0.95, 0.99]

# Reporting threshold for structuring amounts
reporting_threshold: 10000
reporting_currency: 'USD'
# Base probability for high-risk business selection
high_risk_business_probability: 0.05
# Probability for creating a random business when occupation doesn't suggest one
random_business_probability: 0.15
# Probability for an account to be an offshore account
offshore_account_probability: 0.1

high_transaction_amount_ratio: 0.05
low_transaction_amount_ratio: 0.1

account_categories:
  - "Current"
  - "Savings"
  - "Loan"

high_risk_config:
  countries_weight_factor: 1.0
  business_categories_weight_factor: 1.0
  company_size_thresholds:
    very_small_max: 5

risk_weights:
  base_individual: 0.05
  base_business: 0.10
  age_group: 0.15
  occupation: 0.12
  country: 0.2
  business_category: 0.25
  very_small_company: 0.10
  max_score: 1.0

fraud_selection_config:
  # An entity's risk_score must be >= this to be considered for being marked fraudulent.
  min_risk_score_for_fraud_consideration: 0.50
  # If entity is high risk, what is the chance they're selected for a pattern
  base_fraud_probability_if_considered: 0.10